"use strict";(self.webpackChunkguide=self.webpackChunkguide||[]).push([[392],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,i=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=m(n),d=s,h=c["".concat(l,".").concat(d)]||c[d]||u[d]||i;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function d(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=n.length,r=new Array(i);r[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:s,r[1]=o;for(var m=2;m<i;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3358:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return o},metadata:function(){return m},toc:function(){return u}});var a=n(7462),s=n(3366),i=(n(7294),n(3905)),r=["components"],o={},l="armor stats",m={unversionedId:"inventory/armor/stats",id:"inventory/armor/stats",title:"armor stats",description:"where do armor stats come from?",source:"@site/docs/inventory/armor/stats.md",sourceDirName:"inventory/armor",slug:"/inventory/armor/stats",permalink:"/guide/inventory/armor/stats",editUrl:"https://github.com/d2api/d2api.github.io/tree/docs-src/docs/inventory/armor/stats.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"armor",permalink:"/guide/inventory/armor/"},next:{title:"weapons",permalink:"/guide/inventory/weapons/"}},p={},u=[{value:"where do armor stats come from?",id:"where-do-armor-stats-come-from",level:3},{value:"how do i get a real (instanced) armor&#39;s stats?",id:"how-do-i-get-a-real-instanced-armors-stats",level:3},{value:"example time",id:"example-time",level:4},{value:"how do i get the stats for the collection roll?",id:"how-do-i-get-the-stats-for-the-collection-roll",level:3}],c={toc:u};function d(e){var t=e.components,o=(0,s.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"armor-stats"},"armor stats"),(0,i.kt)("h3",{id:"where-do-armor-stats-come-from"},"where do armor stats come from?"),(0,i.kt)("p",null,"armor stats are a combination of the armor's base stats, plus any bonuses or penalties added by its mods, masterwork, and rolled stats"),(0,i.kt)("h3",{id:"how-do-i-get-a-real-instanced-armors-stats"},"how do i get a real (instanced) armor's stats?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"easy mode: get its live stats via the ",(0,i.kt)("inlineCode",{parentName:"li"},"ItemStats")," component (304).",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"look its stats up using its instanceId. voila."),(0,i.kt)("li",{parentName:"ul"},"what's the downside? no details. if mobility is 30, we don't know ",(0,i.kt)("em",{parentName:"li"},"why")," mobility is 30.",(0,i.kt)("br",{parentName:"li"}),"is the masterwork contributing? is a mobility mod attached? all we know is bungie.net calculates the mobility is 30."))),(0,i.kt)("li",{parentName:"ul"},"medium mode, don't do this:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"get its live stats via the ",(0,i.kt)("inlineCode",{parentName:"li"},"ItemStats")," component (304)"),(0,i.kt)("li",{parentName:"ul"},"assume 10 is from the mobility mod you see attached, and assume 2 is from the masterwork because it's masterworked"),(0,i.kt)("li",{parentName:"ul"},"why this doesn't work: if an armor stat is 0 or 42 in ",(0,i.kt)("inlineCode",{parentName:"li"},"ItemStats"),", it may just have its value capped. armor can actually controbute negative or >42 to a character's overall stats."))),(0,i.kt)("li",{parentName:"ul"},"harder but correct mode: build armor stats from its sockets, using the ",(0,i.kt)("inlineCode",{parentName:"li"},"ItemSockets")," component (305).",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"an item's sockets is represented as an array of ",(0,i.kt)("inlineCode",{parentName:"li"},"DestinyItemSocketState")),(0,i.kt)("li",{parentName:"ul"},"each ",(0,i.kt)("inlineCode",{parentName:"li"},"DestinyItemSocketState")," has a ",(0,i.kt)("inlineCode",{parentName:"li"},"plugHash")," property that shows what item is plugged into that socket, and a ",(0,i.kt)("inlineCode",{parentName:"li"},"isEnabled")," property to say whether that item's contribution should be included"),(0,i.kt)("li",{parentName:"ul"},"each plugged item (a ",(0,i.kt)("inlineCode",{parentName:"li"},"DestinyInventoryItemDefinition"),") may contribute investmentStats to the armor.")))),(0,i.kt)("h4",{id:"example-time"},"example time"),(0,i.kt)("p",null,"we have some orpheus rigs. instanced, real ones. in someone's inventory. this item's instance ID is 11111222223333344444"),(0,i.kt)("p",null,"we can see they have 12 sockets, "),(0,i.kt)("details",null,(0,i.kt)("summary",null,"from their definition"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:193869523"},"https://data.destinysets.com/i/InventoryItem:193869523")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9158).Z,width:"407",height:"495"}))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"and from their live data"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "itemComponents": {\n    "sockets": {\n      "data": {\n        "11111222223333344444": {\n          "sockets": [\n            // socket 0\n            {    "plugHash": 2623485440,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 1\n            {    "plugHash": 573150099,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 2\n            {    "plugHash": 573150099,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 3\n            {    "plugHash": 3523075120,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 4\n            {    "plugHash": 4248210736,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 5\n            {    "plugHash": 4264493517,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 6\n            {    "plugHash": 2287381891,\n                 "isEnabled": true,\n                 "isVisible": false         },\n            // socket 7\n            {    "plugHash": 2411971911,\n                 "isEnabled": true,\n                 "isVisible": false         },\n            // socket 8\n            {    "plugHash": 3976251931,\n                 "isEnabled": true,\n                 "isVisible": false         },\n            // socket 9\n            {    "plugHash": 2417304911,\n                 "isEnabled": true,\n                 "isVisible": false         },\n            // socket 10\n            {    "plugHash": 702981643,\n                 "isEnabled": true,\n                 "isVisible": true         },\n            // socket 11\n            {    "plugHash": 1694242449,\n                 "isEnabled": true,\n                 "isVisible": true         }\n          ]\n        }\n      }\n    }\n  }\n}\n\n'))),(0,i.kt)("p",null,"orpheus rigs themselves have some built in stats. 2 points of mobility."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"we can see this in their definition"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"stats": {\n  "disablePrimaryStatDisplay": false,\n  "statGroupHash": 3568793270,\n  "stats": {\n    // [...]\n    "2996146975": {\n      "statHash": 2996146975, // Mobility\n      "value": 2,\n      "minimum": 0,\n      "maximum": 0,\n      "displayMaximum": 42\n    },\n    // [...]\n  },\n  "hasDisplayableStats": true,\n  "primaryBaseStatHash": 3897883278\n}\n'))),(0,i.kt)("p",null,"to get the total stats of this item, we add up its stats, plus the investmentStats of its plugged items."),(0,i.kt)("p",null,"socket 0 has the item ",(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:2623485440"},"2623485440")," plugged in.",(0,i.kt)("br",{parentName:"p"}),"\n",'we look this InventoryItem up and get "Minor Discipline Mod". it contributes 5 Discipline (and uses up 1 armor energy)'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"investmentStats": [\n  {    "statTypeHash": 3578062600, // Any Energy Type Cost\n       "value": 1,\n       "isConditionallyActive": false                       },\n\n  {    "statTypeHash": 1735777505, // Discipline\n       "value": 5,\n       "isConditionallyActive": false                       }\n],\n')),(0,i.kt)("p",null,"sockets 1 and 2 contain ",(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:573150099"},"573150099"),(0,i.kt)("br",{parentName:"p"}),"\n",'we look these up and they\'re "Empty Mod Socket" and contribute no investmentStats.',(0,i.kt)("br",{parentName:"p"}),"\n","same stats on sockets 4 (Default Shader) and 10 (Default Ornament)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"investmentStats": [],\n')),(0,i.kt)("p",null,"socket 3 is ",(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:3523075120"},"3523075120")," Protective Light",(0,i.kt)("br",{parentName:"p"}),"\n","it adds -10 Strength (and uses up 2 void armor energy)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"investmentStats": [\n  {    "statTypeHash": 2399985800, // Void Cost\n       "value": 2,\n       "isConditionallyActive": false            },\n\n  {    "statTypeHash": 4244567218, // Strength\n       "value": -10,\n       "isConditionallyActive": false            }\n],\n')),(0,i.kt)("p",null,"socket 5 is ",(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:4264493517"},"4264493517"),' "Upgrade Armor", the armor\'s energy level.',(0,i.kt)("br",{parentName:"p"}),"\n","from its definition we can see this is a masterwork, because it adds 2 to each armor stat, and contributes 10 void energy capacity.\nnote how in its definition, under ",(0,i.kt)("inlineCode",{parentName:"p"},"plug"),", its various styles note it should be displayed as a masterwork."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"investmentStats": [\n  {    "statTypeHash": 16120457, // Void Energy Capacity\n       "value": 10,\n       "isConditionallyActive": false    },\n  {    "statTypeHash": 2996146975, // Mobility\n       "value": 2,\n       "isConditionallyActive": false    },\n  {    "statTypeHash": 392767087, // Resilience\n       "value": 2,\n       "isConditionallyActive": false    },\n  {    "statTypeHash": 1735777505, // Discipline\n       "value": 2,\n       "isConditionallyActive": false    },\n  {    "statTypeHash": 144602215, // Intellect\n       "value": 2,\n       "isConditionallyActive": false    },\n  {    "statTypeHash": 1943323491, // Recovery\n       "value": 2,\n       "isConditionallyActive": false    },\n  {    "statTypeHash": 4244567218, // Strength\n       "value": 2,\n       "isConditionallyActive": false    }\n],\n')),(0,i.kt)("p",null,"sockets 6, 7, 8, and 9 are random roll stat plugs. #6 is ",(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:2287381891"},"2287381891"),(0,i.kt)("br",{parentName:"p"}),"\n","these 4 sockets contain plug items with no name, which contribute stat points across up to 3 stats.",(0,i.kt)("br",{parentName:"p"}),"\n","note how they say ",(0,i.kt)("inlineCode",{parentName:"p"},'"isVisible": false')," and their definitions have various forms of ",(0,i.kt)("inlineCode",{parentName:"p"},"plugStyle: none"),(0,i.kt)("br",{parentName:"p"}),"\n","these plugs have nothing to display in an app, but do contribute to the item's stats"),(0,i.kt)("p",null,"the last socket ",(0,i.kt)("a",{parentName:"p",href:"https://data.destinysets.com/i/InventoryItem:1694242449"},"1694242449")," is Uncanny Arrows, the exotic item's perk. this contribute's no stats, per its definition."),(0,i.kt)("p",null,"adding up the stats we collected from the masterwork, mods, and random stat plugs, ",(0,i.kt)("strong",{parentName:"p"},"and those bonus 2 mobility from orpheus rigs itself"),", we get the item's final stat total.",(0,i.kt)("br",{parentName:"p"}),"\n","this method can properly handle single-stat totals above 42, or below 0."),(0,i.kt)("h3",{id:"how-do-i-get-the-stats-for-the-collection-roll"},"how do i get the stats for the collection roll?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"same as above, except using only the definition, and the armor's default sockets",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DestinyInventoryItemDefinition.sockets.sockets.socketEntries")," shows an item's default & possible sockets"),(0,i.kt)("li",{parentName:"ul"},"each socket's ",(0,i.kt)("inlineCode",{parentName:"li"},"singleInitialItemHash")," is the default thing plugged into that socket"),(0,i.kt)("li",{parentName:"ul"},"calculate as above")))))}d.isMDXComponent=!0},9158:function(e,t,n){t.Z=n.p+"assets/images/origs-6d89dd8d0eba82d2616ea127916ecb58.png"}}]);